<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Florida ZIP Code Map</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f7f7f7;
  }
  svg {
    background: white;
    border: 1px solid #ccc;
  }
  .zip {
    stroke: #999;
    stroke-width: 0.3;
    cursor: pointer;
  }
  .tooltip {
    position: absolute;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 6px 8px;
    font-size: 12px;
    border-radius: 4px;
    pointer-events: none;
  }
</style>
</head>

<body>
<h2>Florida ZIP Code Map (Fillable)</h2>
<div id="map"></div>
<div class="tooltip" style="opacity:0;"></div>

<script>
// =============================
// 1. DATA TABLE (EDIT THIS)
// =============================
const zipData = {
  "33101": 10,
  "32801": 25,
  "33602": 40,
  "32202": 15,
  "32501": 30
};

// =============================
// 2. COLOR SCALE
// =============================
const color = d3.scaleSequential(d3.interpolateBlues)
  .domain([0, 50]);

// =============================
// 3. SVG SETUP
// =============================
const width = 900;
const height = 700;

const svg = d3.select("#map")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

const tooltip = d3.select(".tooltip");

// =============================
// 4. LOAD ZIP GEOJSON (FLORIDA)
// =============================
d3.json("https://raw.githubusercontent.com/OpenDataDE/State-zip-code-GeoJSON/master/fl_florida_zip_codes_geo.min.json")
  .then(geo => {

    const projection = d3.geoMercator()
      .fitSize([width, height], geo);

    const path = d3.geoPath().projection(projection);

    svg.selectAll("path")
      .data(geo.features)
      .enter()
      .append("path")
      .attr("class", "zip")
      .attr("d", path)
      .attr("fill", d => {
        const zip = d.properties.ZCTA5CE10;
        return zipData[zip] ? color(zipData[zip]) : "#eee";
      })
      .on("mouseover", (event, d) => {
        const zip = d.properties.ZCTA5CE10;
        const value = zipData[zip] ?? "No data";
        tooltip
          .style("opacity", 1)
          .html(`<strong>ZIP:</strong> ${zip}<br><strong>Value:</strong> ${value}`)
          .style("left", (event.pageX + 10) + "px")
          .style("top", (event.pageY - 20) + "px");
      })
      .on("mousemove", event => {
        tooltip
          .style("left", (event.pageX + 10) + "px")
          .style("top", (event.pageY - 20) + "px");
      })
      .on("mouseout", () => {
        tooltip.style("opacity", 0);
      });

  });
</script>
</body>
</html>
